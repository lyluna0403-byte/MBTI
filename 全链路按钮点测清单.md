# MBTI 全链路按钮点测清单（1号自评 / 2号他评 / 3号镜像）

## 测试前准备
- 启动服务：`python3 server.py`（或你当前在用的启动方式）
- 测试入口：
  - 1号页面：`http://<HOST>:8787/MBTI-test.html`
  - 2号页面：`http://<HOST>:8787/MBTI-peer-test.html`
  - 3号页面：`http://<HOST>:8787/MBTI-test.html?assessment=<assessment_id>`
- 准备一个可用兑换码（例如超级码 `inlight`）

## A. 1号页面（自评）按钮链路
1. `验证兑换码开始测评`
- 操作：输入可用兑换码，点击按钮
- 预期：进入“测评说明”页面，不报错

2. `明白了，Let's Go！`
- 操作：点击后开始答题
- 预期：进入 Q1

3. `返回上一题`
- 操作：Q2 及之后点击
- 预期：回到上一题，分数回滚正确

4. 最后一题提交弹窗 `取消/确认提交`
- 操作：最后一题点击选项后先点取消，再重复点确认
- 预期：
  - 取消：留在最后一题
  - 确认：进入自评报告页

5. `✉️ 复制邀请链接`
- 操作：点击复制并粘贴
- 预期：文本包含“前缀文案 + 邀请码 + 2号页面邀请链接（含 invite_token）”

6. `🔑 复制邀请码`
- 操作：点击复制并粘贴
- 预期：文本包含“邀请码 + 2号页面入口链接”

7. 同设备二次进入
- 操作：同一浏览器再次打开 1号页面
- 预期：若该兑换码已提交自评，直接进入报告页，不重新答题

## B. 2号页面（他评）按钮链路
1. `开启他评之旅`
- 操作：通过邀请链接进入后点击
- 预期：进入他评说明页

2. `使用邀请码开始`
- 操作：手动输入邀请码点击
- 预期：校验通过后进入他评说明页

3. `明白了，Let's Go！`
- 操作：点击后开始答题
- 预期：进入 Q1

4. `返回上一题`
- 操作：Q2 及之后点击
- 预期：回到上一题，分数回滚正确

5. `🔗 生成反馈报告发给TA`
- 操作：完成他评后点击复制并粘贴
- 预期：复制结果是“纯链接”，且为 3号页面：
  - 格式：`.../MBTI-test.html?assessment=<assessment_id>[&api_base=...]`
  - 不能是 `MBTI-mirror.html`

## C. 3号页面（镜像）按钮链路
1. assessment 直达
- 操作：打开 2号页复制出的反馈链接
- 预期：直接进入镜像报告（不回到 1号/2号）

2. `解锁你的深度镜像解读报告`
- 操作：点击按钮
- 预期：展示深度解读内容

3. `点击查看自评个人报告`
- 操作：点击按钮
- 预期：切到自评个人报告视图

4. `点击返回镜像报告`
- 操作：从个人报告点击返回
- 预期：
  - 回到镜像报告
  - 镜像对比内容保留
  - 他评详细模块（四宫格/阴暗面/建议）保留
  - 深度解读按钮和已解锁内容保留

## D. 关键跳转防回归（必须过）
1. 2号页误带 `assessment` 参数
- 操作：访问 `MBTI-peer-test.html?assessment=xxx`
- 预期：自动跳转到 3号页面对应报告

2. 3号页无服务或 assessment 无效
- 操作：访问错误 assessment
- 预期：显示 toast 错误提示，不白屏

## E. 已知建议（不影响当前主链路）
- 3号页面当前有 `直接查看报告演示 (调试用)` 按钮。若准备上线，建议隐藏或移除。
